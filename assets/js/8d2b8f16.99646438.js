"use strict";(self.webpackChunkdocusaurus_project=self.webpackChunkdocusaurus_project||[]).push([[428],{2539(e,n,s){s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"Grouping-Data","title":"Grouping Data","description":"Learning Objectives","source":"@site/docs/Grouping-Data.md","sourceDirName":".","slug":"/Grouping-Data","permalink":"/backend-tools-handbook/Grouping-Data","draft":false,"unlisted":false,"editUrl":"https://github.com/pragnakalp/backend-tools-handbook/tree/main/docs/Grouping-Data.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"04 Joining Tables","permalink":"/backend-tools-handbook/Joining-Tables"},"next":{"title":"06 Set Operations","permalink":"/backend-tools-handbook/Set-Operations"}}');var i=s(4848),r=s(8453);const l={},a="Grouping Data",o={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"GROUP BY Clause",id:"group-by-clause",level:2},{value:"What is it?",id:"what-is-it",level:3},{value:"Why use it?",id:"why-use-it",level:3},{value:"Syntax",id:"syntax",level:3},{value:"Aggregate Functions",id:"aggregate-functions",level:2},{value:"Examples",id:"examples",level:3},{value:"GROUP BY with JOINs",id:"group-by-with-joins",level:2},{value:"Example: Customer Names with Total Payments",id:"example-customer-names-with-total-payments",level:3},{value:"Group by Multiple Columns",id:"group-by-multiple-columns",level:3},{value:"HAVING Clause",id:"having-clause",level:2},{value:"What is it?",id:"what-is-it-1",level:3},{value:"Why use it?",id:"why-use-it-1",level:3},{value:"Syntax",id:"syntax-1",level:3},{value:"HAVING vs. WHERE",id:"having-vs-where",level:3},{value:"Example: Filter Groups",id:"example-filter-groups",level:3},{value:"Example: HAVING with COUNT",id:"example-having-with-count",level:3},{value:"Combining WHERE and HAVING",id:"combining-where-and-having",level:2},{value:"Practice Exercises",id:"practice-exercises",level:2},{value:"Solutions",id:"solutions",level:2},{value:"Summary",id:"summary",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"grouping-data",children:"Grouping Data"})}),"\n",(0,i.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,i.jsx)(n.p,{children:"By the end of this module, you will be able to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Use GROUP BY to organize rows into groups"}),"\n",(0,i.jsx)(n.li,{children:"Apply aggregate functions (SUM, COUNT, AVG, etc.)"}),"\n",(0,i.jsx)(n.li,{children:"Filter groups using HAVING clause"}),"\n",(0,i.jsx)(n.li,{children:"Understand the difference between WHERE and HAVING"}),"\n",(0,i.jsx)(n.li,{children:"Group by multiple columns"}),"\n",(0,i.jsx)(n.li,{children:"Combine grouping with joins"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"group-by-clause",children:"GROUP BY Clause"}),"\n",(0,i.jsx)(n.h3,{id:"what-is-it",children:"What is it?"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"GROUP BY"})," clause divides rows into groups based on one or more columns. It's typically used with aggregate functions like ",(0,i.jsx)(n.code,{children:"SUM()"}),", ",(0,i.jsx)(n.code,{children:"COUNT()"}),", ",(0,i.jsx)(n.code,{children:"AVG()"}),", ",(0,i.jsx)(n.code,{children:"MAX()"}),", and ",(0,i.jsx)(n.code,{children:"MIN()"})," to calculate totals or averages for each group."]}),"\n",(0,i.jsx)(n.h3,{id:"why-use-it",children:"Why use it?"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Calculate totals by category (e.g., total sales per customer)"}),"\n",(0,i.jsx)(n.li,{children:"Count records in groups (e.g., number of films per rating)"}),"\n",(0,i.jsx)(n.li,{children:"Find averages per group (e.g., average payment per customer)"}),"\n",(0,i.jsx)(n.li,{children:"Generate summary reports"}),"\n",(0,i.jsx)(n.li,{children:"Analyze data by segments"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"syntax",children:"Syntax"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"SELECT column_name1, aggregate_function(column_name2)\nFROM table_name\nGROUP BY column_name1;\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Important Rules"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"All non-aggregated columns in SELECT must appear in GROUP BY"}),"\n",(0,i.jsx)(n.li,{children:"Aggregate functions calculate values for each group"}),"\n",(0,i.jsx)(n.li,{children:"GROUP BY comes after FROM and WHERE, but before ORDER BY"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"aggregate-functions",children:"Aggregate Functions"}),"\n",(0,i.jsx)(n.p,{children:"These functions perform calculations on groups of rows:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Function"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Example"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"COUNT()"})}),(0,i.jsx)(n.td,{children:"Counts rows"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"COUNT(*)"})," or ",(0,i.jsx)(n.code,{children:"COUNT(column_name)"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SUM()"})}),(0,i.jsx)(n.td,{children:"Sums numeric values"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SUM(amount)"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"AVG()"})}),(0,i.jsx)(n.td,{children:"Calculates average"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"AVG(amount)"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"MAX()"})}),(0,i.jsx)(n.td,{children:"Finds maximum value"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"MAX(amount)"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"MIN()"})}),(0,i.jsx)(n.td,{children:"Finds minimum value"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"MIN(amount)"})})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Total payments per customer"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"SELECT customer_id, SUM(amount) AS total \nFROM payment \nGROUP BY customer_id \nORDER BY customer_id;\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Output"}),": Shows each customer ID with their total payment amount."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Multiple aggregates"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"SELECT customer_id, \n       COUNT(*) AS payment_count,\n       SUM(amount) AS total,\n       AVG(amount) AS average\nFROM payment \nGROUP BY customer_id;\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Output"}),": Comprehensive statistics for each customer's payments."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"group-by-with-joins",children:"GROUP BY with JOINs"}),"\n",(0,i.jsx)(n.p,{children:"Combine grouping with joins to get more meaningful results:"}),"\n",(0,i.jsx)(n.h3,{id:"example-customer-names-with-total-payments",children:"Example: Customer Names with Total Payments"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"SELECT c.first_name || ' ' || c.last_name AS full_name, \n       SUM(p.amount) AS total_paid\nFROM customer c \nINNER JOIN payment p ON c.customer_id = p.customer_id \nGROUP BY full_name \nORDER BY total_paid DESC;\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Output"}),": Shows customer full names with their total payment amounts, sorted by highest payer first."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Why this is useful"}),": Instead of just customer IDs, you get readable customer names with their totals."]}),"\n",(0,i.jsx)(n.h3,{id:"group-by-multiple-columns",children:"Group by Multiple Columns"}),"\n",(0,i.jsx)(n.p,{children:"You can group by multiple columns:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"SELECT customer_id, staff_id, SUM(amount) AS total_amount\nFROM payment \nGROUP BY customer_id, staff_id \nORDER BY customer_id;\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Output"}),": Shows total payments per customer per staff member (e.g., how much each customer paid to each staff member)."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"having-clause",children:"HAVING Clause"}),"\n",(0,i.jsx)(n.h3,{id:"what-is-it-1",children:"What is it?"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"HAVING"})," clause filters groups created by ",(0,i.jsx)(n.code,{children:"GROUP BY"}),". While ",(0,i.jsx)(n.code,{children:"WHERE"})," filters individual rows, ",(0,i.jsx)(n.code,{children:"HAVING"})," filters the resulting groups based on aggregate values."]}),"\n",(0,i.jsx)(n.h3,{id:"why-use-it-1",children:"Why use it?"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Filter groups based on aggregate results"}),"\n",(0,i.jsx)(n.li,{children:"Find groups that meet certain criteria (e.g., total > 100)"}),"\n",(0,i.jsx)(n.li,{children:"Apply conditions to calculated values"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"syntax-1",children:"Syntax"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"SELECT column_name1, aggregate_function(column_name2)\nFROM table_name\nGROUP BY column_name1\nHAVING condition;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"having-vs-where",children:"HAVING vs. WHERE"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"WHERE"}),(0,i.jsx)(n.th,{children:"HAVING"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsxs)(n.td,{children:["Filters ",(0,i.jsx)(n.strong,{children:"individual rows"})]}),(0,i.jsxs)(n.td,{children:["Filters ",(0,i.jsx)(n.strong,{children:"groups"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Used before grouping"}),(0,i.jsx)(n.td,{children:"Used after grouping"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Cannot use aggregate functions"}),(0,i.jsx)(n.td,{children:"Can use aggregate functions"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Applied to raw data"}),(0,i.jsx)(n.td,{children:"Applied to grouped results"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"example-filter-groups",children:"Example: Filter Groups"}),"\n",(0,i.jsx)(n.p,{children:"Find customers who spent more than $200:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"SELECT customer_id, SUM(amount) AS total_spent\nFROM payment \nGROUP BY customer_id \nHAVING SUM(amount) > 200 \nORDER BY total_spent DESC;\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Output"}),": Only customers with total payments exceeding $200."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Why HAVING?"}),": You can't use ",(0,i.jsx)(n.code,{children:"WHERE SUM(amount) > 200"})," because SUM() is calculated after grouping. HAVING filters the groups after they're created."]}),"\n",(0,i.jsx)(n.h3,{id:"example-having-with-count",children:"Example: HAVING with COUNT"}),"\n",(0,i.jsx)(n.p,{children:"Find customers who made more than 10 payments:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"SELECT customer_id, COUNT(*) AS payment_count\nFROM payment \nGROUP BY customer_id \nHAVING COUNT(*) > 10 \nORDER BY payment_count DESC;\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"combining-where-and-having",children:"Combining WHERE and HAVING"}),"\n",(0,i.jsx)(n.p,{children:"You can use both WHERE and HAVING in the same query:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"SELECT customer_id, SUM(amount) AS total_spent\nFROM payment \nWHERE amount > 2.00  -- Filter individual payments first\nGROUP BY customer_id \nHAVING SUM(amount) > 200  -- Then filter groups\nORDER BY total_spent DESC;\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Process"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"WHERE"}),": Filters individual payment rows (only payments > $2.00)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"GROUP BY"}),": Groups remaining payments by customer"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"HAVING"}),": Filters groups (only customers with total > $200)"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Why this matters"}),": You filter the data at two levels - first the individual rows, then the groups."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"practice-exercises",children:"Practice Exercises"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Count how many films are in each rating category"}),"\n",(0,i.jsx)(n.li,{children:"Calculate the total rental amount per customer"}),"\n",(0,i.jsx)(n.li,{children:"Find customers who spent more than $150 (use HAVING)"}),"\n",(0,i.jsx)(n.li,{children:"Show average film length by rating, only for ratings with average > 100 minutes"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"solutions",children:"Solutions"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"-- 1. Films per rating\nSELECT rating, COUNT(*) AS film_count \nFROM film \nGROUP BY rating \nORDER BY film_count DESC;\n\n-- 2. Total per customer\nSELECT customer_id, SUM(amount) AS total_amount\nFROM payment \nGROUP BY customer_id \nORDER BY total_amount DESC;\n\n-- 3. High spenders\nSELECT customer_id, SUM(amount) AS total_spent \nFROM payment \nGROUP BY customer_id \nHAVING SUM(amount) > 150 \nORDER BY total_spent DESC;\n\n-- 4. Average length by rating\nSELECT rating, AVG(length) AS avg_length \nFROM film \nGROUP BY rating \nHAVING AVG(length) > 100\nORDER BY avg_length DESC;\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"GROUP BY"})," organizes rows into groups based on column values"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Aggregate functions"})," (",(0,i.jsx)(n.code,{children:"COUNT"}),", ",(0,i.jsx)(n.code,{children:"SUM"}),", ",(0,i.jsx)(n.code,{children:"AVG"}),", ",(0,i.jsx)(n.code,{children:"MAX"}),", ",(0,i.jsx)(n.code,{children:"MIN"}),") calculate values for each group"]}),"\n",(0,i.jsx)(n.li,{children:"All non-aggregated columns in SELECT must be in GROUP BY"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"HAVING"})," filters groups after they're created (unlike WHERE which filters rows)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"WHERE"})," filters individual rows before grouping"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"HAVING"})," filters groups after grouping (can use aggregate functions)"]}),"\n",(0,i.jsx)(n.li,{children:"You can group by multiple columns"}),"\n",(0,i.jsx)(n.li,{children:"Combine GROUP BY with JOINs to get meaningful aggregated data"}),"\n",(0,i.jsx)(n.li,{children:"Use ORDER BY after GROUP BY to sort grouped results"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Next Module"}),": ",(0,i.jsx)(n.a,{href:"/backend-tools-handbook/Set-Operations",children:"Set-Operations.md"})," - Learn to combine multiple result sets"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Great job! You can now group and aggregate data effectively!"})," \ud83c\udf89"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>l,x:()=>a});var t=s(6540);const i={},r=t.createContext(i);function l(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);